{
  "permissions": {
    "allow": [
      "Bash(npx wxt@latest init . --template react -y)",
      "Bash(npx wxt@latest init:*)",
      "Bash(npm init:*)",
      "Bash(npm install:*)",
      "Bash(npx tailwindcss init -p)",
      "Bash(git init:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nInitial project setup for Artefakt Extension\n\n- Set up WXT framework with React and TypeScript\n- Configure Tailwind CSS with accessible color palette\n- Create database schema using Dexie.js for IndexedDB\n- Implement platform adapters for ChatGPT, Claude, Gemini, YouTube, Google Scholar\n- Add screenshot capture and compression utilities\n- Create accessible UI components (Button, Select, Input, Card, Modal)\n- Set up popup and sidepanel entrypoints\n- Add CLAUDE.md with project documentation\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(npm run dev:*)",
      "Bash(cat:*)",
      "Bash(npm run build:*)",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create --title \"Phase 1: Project Setup & Core Infrastructure\" --body \"$(cat <<''EOF''\n## Overview\nComplete the foundational setup that was started. Most of this is done but needs verification and cleanup.\n\n## Checklist\n- [x] Initialize WXT project with React\n- [x] Install core dependencies (Dexie, Supabase, browser-image-compression, etc.)\n- [x] Configure Tailwind CSS v4\n- [x] Set up project directory structure\n- [x] Create database schema types\n- [x] Configure WXT manifest\n- [ ] Verify database schema works with Dexie\n- [ ] Add proper TypeScript path aliases (currently using relative paths)\n- [ ] Create extension icons (16, 32, 48, 128px PNGs from SVG)\n- [ ] Test extension loads in Chrome\n\n## Files\n- `src/lib/db/index.ts` - Dexie database\n- `src/types/source.ts` - SourceCapture type\n- `wxt.config.ts` - WXT configuration\n- `tailwind.config.js` - Tailwind theme\n\n## Notes\nPhase 1 is ~90% complete from initial setup. Needs verification and icon generation.\nEOF\n)\" --label \"phase-1,setup\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create --title \"Phase 1: Project Setup & Core Infrastructure\" --body \"$(cat <<''EOF''\n## Overview\nComplete the foundational setup that was started. Most of this is done but needs verification and cleanup.\n\n## Checklist\n- [x] Initialize WXT project with React\n- [x] Install core dependencies (Dexie, Supabase, browser-image-compression, etc.)\n- [x] Configure Tailwind CSS v4\n- [x] Set up project directory structure\n- [x] Create database schema types\n- [x] Configure WXT manifest\n- [ ] Verify database schema works with Dexie\n- [ ] Add proper TypeScript path aliases (currently using relative paths)\n- [ ] Create extension icons (16, 32, 48, 128px PNGs from SVG)\n- [ ] Test extension loads in Chrome\n\n## Files\n- `src/lib/db/index.ts` - Dexie database\n- `src/types/source.ts` - SourceCapture type\n- `wxt.config.ts` - WXT configuration\n- `tailwind.config.js` - Tailwind theme\n\n## Notes\nPhase 1 is ~90% complete from initial setup. Needs verification and icon generation.\nEOF\n)\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create --title \"Phase 2: Source Capture System\" --body \"$(cat <<''EOF''\n## Overview\nImplement the core capture functionality - screenshots, metadata extraction, and storage.\n\n## Checklist\n- [x] Background service worker structure (`entrypoints/background.ts`)\n- [x] Screenshot capture with `tabs.captureVisibleTab`\n- [x] Screenshot compression utility (`src/lib/capture/screenshot.ts`)\n- [x] Content script for metadata extraction (`entrypoints/content.ts`)\n- [ ] Test screenshot capture end-to-end\n- [ ] Verify image compression produces <200KB files\n- [ ] Test saving sources to IndexedDB\n- [ ] Add error handling for capture failures\n- [ ] Implement session management (create/resume sessions)\n- [ ] Add keyboard shortcut handler (Alt+Shift+S)\n\n## Files\n- `entrypoints/background.ts` - Main capture orchestration\n- `src/lib/capture/screenshot.ts` - Image processing\n- `entrypoints/content.ts` - DOM metadata extraction\n\n## Dependencies\n- Phase 1 must be complete\n\n## Testing\n1. Load extension in Chrome\n2. Navigate to any webpage\n3. Click extension icon â†’ \"Save This Page\"\n4. Verify screenshot + metadata saved to IndexedDB\nEOF\n)\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create:*)",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create --title \"Phase 4: UI Components\" --body \"$(cat <<''EOF''\n## Overview\nBuild the React UI components for popup, sidepanel, and shared components.\n\n## Checklist\n\n### Shared UI Components\n- [x] Button component with variants (primary, secondary, ghost)\n- [x] Select component with label\n- [x] Input component with error state\n- [x] Card component\n- [x] Modal component\n- [ ] Add loading spinner component\n- [ ] Add toast/notification component\n\n### Popup UI\n- [x] Basic popup structure\n- [x] \"Save This Page\" button\n- [x] Recent sources list (last 5)\n- [ ] Add loading state during capture\n- [ ] Show success/error feedback\n- [ ] Add \"Open Side Panel\" functionality\n\n### Side Panel UI\n- [x] Tab navigation (Sources, Origin Trail, Share)\n- [x] Source list with selection\n- [x] Basic source card display\n- [ ] Implement SourceCard component with thumbnails\n- [ ] Add source filtering/search\n- [ ] Add source deletion\n- [ ] Add source editing (notes, tags)\n\n### Accessibility\n- [x] Focus visible styles\n- [x] ARIA labels on buttons\n- [x] Keyboard navigation for tabs\n- [ ] Screen reader testing\n- [ ] Color contrast verification (4.5:1)\n\n## Files\n- `src/components/ui/` - Shared components\n- `entrypoints/popup/App.tsx`\n- `entrypoints/sidepanel/App.tsx`\n- `src/components/SourceCard.tsx` (to create)\nEOF\n)\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create --title \"Phase 5: Citation System\" --body \"$(cat <<''EOF''\n## Overview\nImplement citation generation using citeproc-js with support for APA, MLA, Chicago, IEEE, and Harvard styles.\n\n## Checklist\n\n### CSL Style Loading\n- [ ] Create style loader with caching (`src/lib/citation/styles.ts`)\n- [ ] Fetch styles from CSL GitHub repository\n- [ ] Preload common styles (APA, MLA, Chicago)\n- [ ] Handle fetch failures gracefully\n\n### CSL-JSON Conversion\n- [ ] Convert SourceCapture to CSL-JSON format (`src/lib/citation/formats.ts`)\n- [ ] Handle AI conversation citations (special formatting)\n- [ ] Handle video citations (YouTube)\n- [ ] Handle academic paper citations\n- [ ] Parse author names (Family, Given format)\n\n### Citation Processing\n- [ ] Set up citeproc-js engine (`src/lib/citation/citeproc.ts`)\n- [ ] Generate in-text citations\n- [ ] Generate bibliography entries\n- [ ] Include English US locale\n\n### Citation UI\n- [ ] Create CitationFormatter component (`src/components/CitationFormatter.tsx`)\n- [ ] Style selector dropdown\n- [ ] Display formatted citation output\n- [ ] Copy to clipboard functionality\n- [ ] Handle multiple selected sources\n\n## Files to Create\n- `src/lib/citation/styles.ts`\n- `src/lib/citation/formats.ts`\n- `src/lib/citation/citeproc.ts`\n- `src/components/CitationFormatter.tsx`\n\n## AI Citation Format (APA example)\n> OpenAI. (2024). ChatGPT (Nov 13 version) [Large language model]. https://chat.openai.com\n\n## Dependencies\n- citeproc package (already installed)\n- Phases 2-4 complete\nEOF\n)\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create --title \"Phase 6: Origin Trail Visualization\" --body \"$(cat <<''EOF''\n## Overview\nImplement the timeline visualization showing the research journey using vis-timeline.\n\n## Checklist\n\n### Timeline Component\n- [ ] Create OriginTrail component (`src/components/OriginTrail.tsx`)\n- [ ] Initialize vis-timeline with source data\n- [ ] Convert sources to timeline items\n- [ ] Add thumbnail previews to timeline items\n- [ ] Implement zoom/pan controls\n- [ ] Handle source selection from timeline\n\n### Timeline Styling\n- [ ] Color-code by source type (AI=purple, web=blue, video=red, academic=green)\n- [ ] Style selected items\n- [ ] Add focus styles for accessibility\n- [ ] Support reduced motion preference\n\n### Interactivity\n- [ ] Click to select source\n- [ ] Keyboard navigation (arrow keys)\n- [ ] Sync selection with source list\n- [ ] Show source details on hover/focus\n\n### Data Model\n- [ ] Track source relationships (previousSourceId)\n- [ ] Group sources by session\n- [ ] Calculate session duration\n\n## Files\n- `src/components/OriginTrail.tsx`\n- `src/styles/globals.css` (timeline styles already added)\n\n## Dependencies\n- vis-timeline, vis-data packages (already installed)\n- Phase 4 UI components complete\nEOF\n)\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create --title \"Phase 7: Backend & Sharing\" --body \"$(cat <<''EOF''\n## Overview\nSet up Supabase backend for cloud sync and shareable origin trail links.\n\n## Checklist\n\n### Supabase Setup\n- [ ] Create Supabase project\n- [ ] Run database schema SQL (sources, sessions, shared_trails tables)\n- [ ] Enable Row Level Security policies\n- [ ] Create screenshots storage bucket\n- [ ] Configure authentication (email)\n\n### Sync Implementation\n- [ ] Create Supabase client (`src/lib/storage/sync.ts`)\n- [ ] Implement source sync to cloud\n- [ ] Upload screenshots to Supabase Storage\n- [ ] Track sync status in IndexedDB\n- [ ] Handle offline/online transitions\n\n### Share Links\n- [ ] Create share link generator (`src/lib/storage/share.ts`)\n- [ ] Generate unique share tokens (nanoid)\n- [ ] Set expiration dates\n- [ ] Retrieve shared trails by token\n- [ ] Increment view count\n\n### Options Page\n- [ ] Create options page (`entrypoints/options/`)\n- [ ] Supabase credentials input\n- [ ] Login/logout functionality\n- [ ] Sync status display\n- [ ] Privacy settings (excluded domains)\n\n## Files to Create\n- `src/lib/storage/sync.ts`\n- `src/lib/storage/share.ts`\n- `entrypoints/options/App.tsx`\n\n## Database Schema\nSee IMPLEMENTATION_PLAN.md section 8.1 for full SQL schema.\n\n## Notes\nThis phase is optional for MVP - local-only mode works without Supabase.\nEOF\n)\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue create --title \"Phase 8: Testing & Polish\" --body \"$(cat <<''EOF''\n## Overview\nFinal testing, bug fixes, and preparation for release.\n\n## Functionality Testing\n- [ ] Capture source from regular webpage\n- [ ] Capture source from ChatGPT with model version\n- [ ] Capture source from Claude\n- [ ] Capture source from YouTube with timestamp\n- [ ] Screenshot compression produces files <200KB\n- [ ] Generate APA citation for webpage\n- [ ] Generate MLA citation for AI conversation\n- [ ] Generate Chicago citation for academic source\n- [ ] Copy citation to clipboard\n- [ ] Copy bibliography to clipboard\n- [ ] Origin trail shows sources chronologically\n- [ ] Click timeline item selects source\n- [ ] Sources persist after browser restart\n- [ ] Create shareable link (if Supabase configured)\n\n## Accessibility Testing\n- [ ] All elements reachable via Tab\n- [ ] Focus indicators visible\n- [ ] Logical focus order\n- [ ] Screen reader announces buttons correctly\n- [ ] Screen reader announces form labels\n- [ ] Color contrast passes WCAG AA (Lighthouse)\n- [ ] UI usable at 200% zoom\n- [ ] Timeline navigable with keyboard\n- [ ] Error messages announced by screen readers\n\n## Cross-Browser Testing\n- [ ] Chrome: All features work\n- [ ] Firefox: All features work\n- [ ] Edge: All features work\n- [ ] Safari: Basic capture works (optional)\n\n## Performance\n- [ ] Extension loads in <1s\n- [ ] Screenshot capture <3s\n- [ ] Side panel renders smoothly with 50+ sources\n- [ ] Bundle size reasonable (<1MB)\n\n## Release Prep\n- [ ] Update version in package.json and manifest\n- [ ] Create production build\n- [ ] Test production build in Chrome\n- [ ] Write release notes\n- [ ] Create zip for Chrome Web Store (if publishing)\nEOF\n)\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue list)",
      "Bash(node scripts/generate-icons.js:*)",
      "Bash(git add:*)",
      "WebFetch(domain:wxt.dev)",
      "WebFetch(domain:playwright.dev)",
      "Bash(npx playwright install:*)",
      "Bash(npm run test:*)",
      "Bash(npx playwright test --headed)",
      "Bash(npx playwright test:*)",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue view 1)",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue close 1 --comment \"Phase 1 complete! All items verified:\n- WXT project initialized with React\n- Core dependencies installed\n- Tailwind CSS v4 configured\n- Database schema working (verified via E2E capture test)\n- PNG icons generated from SVG\n- Extension loads and works in Chrome (Playwright E2E tests passing)\")",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" issue view 2)"
    ],
    "deny": [],
    "ask": []
  }
}
